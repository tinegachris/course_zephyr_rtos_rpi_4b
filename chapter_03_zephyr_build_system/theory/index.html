
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://tinegachris.github.io/course_zephyr_rtos_rpi_4b/chapter_03_zephyr_build_system/theory/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../lab/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Theory - Zephyr RTOS Development Course</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapter-3-zephyr-build-system-theory" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Zephyr RTOS Development Course" class="md-header__button md-logo" aria-label="Zephyr RTOS Development Course" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zephyr RTOS Development Course
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Theory
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Zephyr RTOS Development Course" class="md-nav__button md-logo" aria-label="Zephyr RTOS Development Course" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Zephyr RTOS Development Course
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code of Conduct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_01_course_introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1: Course Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_02_introduction_to_zephyr/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 2: Introduction to Zephyr
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Chapter 2: Introduction to Zephyr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_02_introduction_to_zephyr/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_02_introduction_to_zephyr/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 3: Zephyr Build System
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Chapter 3: Zephyr Build System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#west-build-system-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      West Build System Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="West Build System Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wests-role-in-zephyr-development" class="md-nav__link">
    <span class="md-ellipsis">
      West's Role in Zephyr Development
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#west-configuration-files" class="md-nav__link">
    <span class="md-ellipsis">
      West Configuration Files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmake-integration-in-zephyr" class="md-nav__link">
    <span class="md-ellipsis">
      CMake Integration in Zephyr
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CMake Integration in Zephyr">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cmake-build-process-flow" class="md-nav__link">
    <span class="md-ellipsis">
      CMake Build Process Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#essential-cmake-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Essential CMake Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-structure-and-organization" class="md-nav__link">
    <span class="md-ellipsis">
      Application Structure and Organization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Application Structure and Organization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-project-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Project Layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modular-cmake-organization" class="md-nav__link">
    <span class="md-ellipsis">
      Modular CMake Organization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolchains-and-cross-compilation" class="md-nav__link">
    <span class="md-ellipsis">
      Toolchains and Cross-Compilation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Toolchains and Cross-Compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-zephyr-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Zephyr SDK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolchain-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Toolchain Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-toolchain-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Toolchain Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-optimization-and-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Build Optimization and Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Optimization and Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kconfig-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Kconfig Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-artifacts-and-output" class="md-nav__link">
    <span class="md-ellipsis">
      Build Artifacts and Output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization Techniques
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device-tree-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Device Tree Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Device Tree Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#device-tree-in-the-build-process" class="md-nav__link">
    <span class="md-ellipsis">
      Device Tree in the Build Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-system-device-tree-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Build System Device Tree Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_04_configure_zephyr/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 4: Configure Zephyr
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Chapter 4: Configure Zephyr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_04_configure_zephyr/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_04_configure_zephyr/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_05_west/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 5: West
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Chapter 5: West
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_05_west/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_05_west/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_06_zephyr_fundamentals/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 6: Zephyr Fundamentals
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Chapter 6: Zephyr Fundamentals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_06_zephyr_fundamentals/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_06_zephyr_fundamentals/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_07_thread_management/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 7: Thread Management
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Chapter 7: Thread Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_07_thread_management/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_07_thread_management/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_08_tracing_and_logging/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 8: Tracing and Logging
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Chapter 8: Tracing and Logging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_08_tracing_and_logging/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_08_tracing_and_logging/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_11" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_09_memory_management/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 9: Memory Management
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11" id="__nav_11_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Chapter 9: Memory Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_09_memory_management/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_09_memory_management/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_12" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_10_user_mode/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 10: User Mode
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12" id="__nav_12_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Chapter 10: User Mode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_10_user_mode/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_10_user_mode/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_13" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_11_traditional_multithreading_primitives/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 11: Traditional Multithreading Primitives
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_13" id="__nav_13_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Chapter 11: Traditional Multithreading Primitives
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_11_traditional_multithreading_primitives/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_11_traditional_multithreading_primitives/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_14" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_12_inter-thread_communication/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 12: Inter-thread Communication
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_14" id="__nav_14_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Chapter 12: Inter-thread Communication
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_12_inter-thread_communication/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_12_inter-thread_communication/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_15" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_13_interrupt_management/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 13: Interrupt Management
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_15" id="__nav_15_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            Chapter 13: Interrupt Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_13_interrupt_management/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_13_interrupt_management/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_16" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_14_modules/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 14: Modules
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_16" id="__nav_16_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Chapter 14: Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_14_modules/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_14_modules/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_17" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_15_writing_kconfig_symbols/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 15: Writing Kconfig Symbols
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_17" id="__nav_17_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Chapter 15: Writing Kconfig Symbols
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_15_writing_kconfig_symbols/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_15_writing_kconfig_symbols/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_18" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_16_device_driver_architecture/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 16: Device Driver Architecture
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_18" id="__nav_18_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            Chapter 16: Device Driver Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_16_device_driver_architecture/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_16_device_driver_architecture/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_19" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_17_power_management/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 17: Power Management
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_19" id="__nav_19_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_19">
            <span class="md-nav__icon md-icon"></span>
            Chapter 17: Power Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_17_power_management/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_17_power_management/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_20" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../chapter_18_capstone_project/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapter 18: Capstone Project
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_20" id="__nav_20_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_20">
            <span class="md-nav__icon md-icon"></span>
            Chapter 18: Capstone Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_18_capstone_project/theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_18_capstone_project/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter_18_capstone_project/networked_monitor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Networked Monitor
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#west-build-system-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      West Build System Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="West Build System Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wests-role-in-zephyr-development" class="md-nav__link">
    <span class="md-ellipsis">
      West's Role in Zephyr Development
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#west-configuration-files" class="md-nav__link">
    <span class="md-ellipsis">
      West Configuration Files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmake-integration-in-zephyr" class="md-nav__link">
    <span class="md-ellipsis">
      CMake Integration in Zephyr
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CMake Integration in Zephyr">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cmake-build-process-flow" class="md-nav__link">
    <span class="md-ellipsis">
      CMake Build Process Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#essential-cmake-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Essential CMake Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-structure-and-organization" class="md-nav__link">
    <span class="md-ellipsis">
      Application Structure and Organization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Application Structure and Organization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-project-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Project Layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modular-cmake-organization" class="md-nav__link">
    <span class="md-ellipsis">
      Modular CMake Organization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toolchains-and-cross-compilation" class="md-nav__link">
    <span class="md-ellipsis">
      Toolchains and Cross-Compilation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Toolchains and Cross-Compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-zephyr-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Zephyr SDK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolchain-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Toolchain Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-toolchain-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Toolchain Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-optimization-and-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Build Optimization and Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Optimization and Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kconfig-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Kconfig Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-artifacts-and-output" class="md-nav__link">
    <span class="md-ellipsis">
      Build Artifacts and Output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization Techniques
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device-tree-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Device Tree Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Device Tree Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#device-tree-in-the-build-process" class="md-nav__link">
    <span class="md-ellipsis">
      Device Tree in the Build Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-system-device-tree-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Build System Device Tree Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="chapter-3-zephyr-build-system-theory">Chapter 3: Zephyr Build System - Theory</h1>
<hr />
<p><a href="../">Introduction</a> | <a href="./">Theory</a> | <a href="../lab/">Lab</a> | <a href="../../">Course Home</a></p>
<hr />
<p>Building on your hands-on experience from Chapter 2, let's explore the technical details of how Zephyr transforms source code into executable firmware. This deep dive will give you the knowledge to customize, optimize, and troubleshoot your build process.</p>
<hr />
<h2 id="west-build-system-architecture">West Build System Architecture</h2>
<h3 id="wests-role-in-zephyr-development">West's Role in Zephyr Development</h3>
<p>West is more than just a build tool - it's a multi-repository project manager designed specifically for complex embedded systems development. Unlike traditional build systems that work with single repositories, West manages the entire Zephyr ecosystem.</p>
<p><strong>Multi-Repository Management:</strong></p>
<pre><code>zephyrproject/                 # West workspace
 .west/                     # West metadata and configuration
 zephyr/                    # Main Zephyr RTOS repository
 modules/
    hal/                   # Hardware abstraction layers
       nordic/           # Nordic Semiconductor drivers
       stm32/            # STM32 HAL
       espressif/        # ESP32 components
    lib/
       cjson/            # JSON parsing library
       mbedtls/          # Cryptographic library
       littlefs/         # Filesystem implementation
    crypto/               # Cryptographic implementations
 tools/                     # Development tools
 bootloader/               # MCUboot secure bootloader
</code></pre>
<p><strong>Key West Commands and Their Functions:</strong></p>
<pre><code class="language-bash"># Project initialization and updates
west init ~/zephyrproject       # Initialize workspace
west update                     # Sync all repositories
west status                     # Show repository states

# Building and configuration
west build -b rpi_4b app/       # Build application for Raspberry Pi 4B
west build -b rpi_4b app/ -p    # Pristine build (clean first)
west build -t menuconfig        # Open configuration menu
west build -t clean            # Clean build artifacts

# Deployment and debugging
west flash                      # Flash to connected device
west debug                      # Start debugging session
west attach                     # Attach debugger to running target
</code></pre>
<h3 id="west-configuration-files">West Configuration Files</h3>
<p><strong>west.yml (Manifest File):</strong>
Defines repositories, versions, and dependencies:</p>
<pre><code class="language-yaml">manifest:
  defaults:
    remote: upstream

  remotes:
    - name: upstream
      url-base: https://github.com/zephyrproject-rtos

  projects:
    - name: zephyr
      revision: main
      path: zephyr
    - name: hal_nordic
      revision: 57d9fc59c9ea86465b5cd26f0fe2b9dcc520768b
      path: modules/hal/nordic
      groups:
        - hal
</code></pre>
<p><strong>.west/config (Local Configuration):</strong></p>
<pre><code class="language-ini">[manifest]
path = zephyr

[zephyr]
base = zephyr

[build]
board = rpi_4b
</code></pre>
<h2 id="cmake-integration-in-zephyr">CMake Integration in Zephyr</h2>
<h3 id="cmake-build-process-flow">CMake Build Process Flow</h3>
<p>Zephyr uses CMake as its underlying build system, but with significant customizations for embedded development:</p>
<pre><code class="language-mermaid">graph TD
    A[west build] --&gt; B[CMake Configure]
    B --&gt; C[Process Device Tree]
    C --&gt; D[Generate Kconfig]
    D --&gt; E[Compile Sources]
    E --&gt; F[Link Libraries]
    F --&gt; G[Generate Firmware]
    G --&gt; H[Post-build Processing]
</code></pre>
<h3 id="essential-cmake-functions">Essential CMake Functions</h3>
<p><strong>Basic Application CMakeLists.txt:</strong></p>
<pre><code class="language-cmake"># Minimum CMake version
cmake_minimum_required(VERSION 3.20.0)

# Find Zephyr package
find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})

# Define project
project(my_application)

# Add source files
target_sources(app PRIVATE
    src/main.c
    src/sensors.c
    src/networking.c
)

# Include directories
target_include_directories(app PRIVATE
    include/
    src/
)

# Link libraries
target_link_libraries(app PRIVATE
    subsys__net
    drivers__sensor
)
</code></pre>
<p><strong>Advanced CMake Techniques:</strong></p>
<pre><code class="language-cmake"># Conditional compilation based on configuration
if(CONFIG_NETWORKING)
    target_sources(app PRIVATE src/network_manager.c)
endif()

# Board-specific source files
if(BOARD STREQUAL &quot;rpi_4b&quot;)
    target_sources(app PRIVATE src/rpi_specific.c)
elseif(BOARD STREQUAL &quot;nrf52840dk_nrf52840&quot;)
    target_sources(app PRIVATE src/nordic_specific.c)
endif()

# Custom compile definitions
target_compile_definitions(app PRIVATE
    -DAPP_VERSION=&quot;1.2.3&quot;
    -DDEBUG_LEVEL=2
)

# Custom compiler flags
target_compile_options(app PRIVATE
    -Wall
    -Wextra
    -O2
)
</code></pre>
<h2 id="application-structure-and-organization">Application Structure and Organization</h2>
<h3 id="recommended-project-layout">Recommended Project Layout</h3>
<p><strong>Small Application Structure:</strong></p>
<pre><code>my_app/
 CMakeLists.txt            # Build configuration
 prj.conf                  # Kconfig settings
 README.md                 # Project documentation
 src/
    main.c               # Application entry point
 include/
    app_config.h         # Application headers
 boards/                   # Board-specific configurations
     rpi_4b.conf          # Raspberry Pi 4B specific settings
</code></pre>
<p><strong>Complex Application Structure:</strong></p>
<pre><code>complex_iot_app/
 CMakeLists.txt
 prj.conf
 Kconfig                   # Custom Kconfig options
 VERSION                   # Version information
 src/
    main.c
    sensors/
       temperature.c
       humidity.c
       CMakeLists.txt
    networking/
       wifi_manager.c
       mqtt_client.c
       CMakeLists.txt
    storage/
        flash_storage.c
        CMakeLists.txt
 include/
    sensors/
    networking/
    storage/
 tests/                    # Unit tests
    CMakeLists.txt
    src/
 boards/                   # Board-specific configurations
    rpi_4b.conf
    rpi_4b.overlay       # Device tree overlay
    nrf52840dk_nrf52840.conf
 dts/
    bindings/            # Custom device tree bindings
 scripts/                 # Build and deployment scripts
     flash.sh
     test.sh
</code></pre>
<h3 id="modular-cmake-organization">Modular CMake Organization</h3>
<p><strong>Parent CMakeLists.txt:</strong></p>
<pre><code class="language-cmake">cmake_minimum_required(VERSION 3.20.0)
find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})
project(complex_iot_app)

# Add main source
target_sources(app PRIVATE src/main.c)

# Add subdirectories (modules)
add_subdirectory(src/sensors)
add_subdirectory(src/networking)
add_subdirectory(src/storage)

# Global include directories
target_include_directories(app PRIVATE include/)
</code></pre>
<p><strong>Module CMakeLists.txt (src/sensors/CMakeLists.txt):</strong></p>
<pre><code class="language-cmake"># Add sensor module sources
target_sources(app PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/temperature.c
    ${CMAKE_CURRENT_SOURCE_DIR}/humidity.c
)

# Module-specific includes
target_include_directories(app PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/../include/sensors
)

# Module-specific libraries
if(CONFIG_SENSOR_BME280)
    target_sources(app PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/bme280.c)
endif()
</code></pre>
<h2 id="toolchains-and-cross-compilation">Toolchains and Cross-Compilation</h2>
<h3 id="understanding-the-zephyr-sdk">Understanding the Zephyr SDK</h3>
<p>The Zephyr SDK provides:</p>
<p><strong>Cross-Compilation Toolchains:</strong>
* <strong>ARM:</strong> arm-zephyr-eabi-gcc for Cortex-M and Cortex-A processors
* <strong>RISC-V:</strong> riscv64-zephyr-elf-gcc for RISC-V architectures
* <strong>x86:</strong> x86_64-zephyr-elf-gcc for x86/x86_64 targets
* <strong>ARC:</strong> arc-zephyr-elf-gcc for ARC processors</p>
<p><strong>Host Tools:</strong>
* Device tree compiler (dtc)
* Generator for various output formats
* Debugging tools and utilities</p>
<h3 id="toolchain-configuration">Toolchain Configuration</h3>
<p><strong>Environment Variables:</strong></p>
<pre><code class="language-bash"># Zephyr SDK configuration
export ZEPHYR_TOOLCHAIN_VARIANT=zephyr
export ZEPHYR_SDK_INSTALL_DIR=~/zephyr-sdk-0.17.4

# Cross-compilation settings (automatically set by Zephyr)
export CROSS_COMPILE=arm-zephyr-eabi-
export CC=arm-zephyr-eabi-gcc
export CXX=arm-zephyr-eabi-g++
</code></pre>
<p><strong>CMake Toolchain Selection:</strong>
Zephyr automatically selects the appropriate toolchain based on:
1. Target board architecture
2. ZEPHYR_TOOLCHAIN_VARIANT environment variable
3. Available toolchains in the SDK</p>
<h3 id="custom-toolchain-configuration">Custom Toolchain Configuration</h3>
<p><strong>Using Alternative Toolchains:</strong></p>
<pre><code class="language-bash"># Use LLVM/Clang instead of GCC
export ZEPHYR_TOOLCHAIN_VARIANT=llvm

# Use ARM Compiler 6
export ZEPHYR_TOOLCHAIN_VARIANT=armclang

# Use custom toolchain
export ZEPHYR_TOOLCHAIN_VARIANT=cross-compile
export CROSS_COMPILE=arm-linux-gnueabihf-
</code></pre>
<h2 id="build-optimization-and-configuration">Build Optimization and Configuration</h2>
<h3 id="kconfig-integration">Kconfig Integration</h3>
<p>The build system integrates tightly with Kconfig for feature selection:</p>
<p><strong>prj.conf Example:</strong></p>
<pre><code class="language-bash"># Core system configuration
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# Enable networking
CONFIG_NETWORKING=y
CONFIG_NET_IPV4=y
CONFIG_NET_TCP=y

# Enable sensors
CONFIG_SENSOR=y
CONFIG_BME280=y

# Board-specific optimizations
CONFIG_FPU=y
CONFIG_SPEED_OPTIMIZATIONS=y
</code></pre>
<p><strong>Conditional Build Logic:</strong></p>
<pre><code class="language-cmake"># Include networking code only if enabled
if(CONFIG_NETWORKING)
    target_sources(app PRIVATE src/network_manager.c)
    target_link_libraries(app PRIVATE subsys__net)
endif()

# Optimize for different scenarios
if(CONFIG_DEBUG)
    target_compile_options(app PRIVATE -O0 -g3)
else()
    target_compile_options(app PRIVATE -Os -DNDEBUG)
endif()
</code></pre>
<h3 id="build-artifacts-and-output">Build Artifacts and Output</h3>
<p><strong>Generated Files:</strong></p>
<pre><code>build/
 zephyr/
    zephyr.elf           # ELF executable with debug symbols
    zephyr.bin           # Raw binary for flashing
    zephyr.hex           # Intel HEX format
    zephyr.map           # Memory map and symbol table
    zephyr.dts           # Compiled device tree
    include/
        generated/       # Generated headers
 CMakeCache.txt           # CMake configuration cache
 compile_commands.json    # For IDE integration
</code></pre>
<h3 id="performance-optimization-techniques">Performance Optimization Techniques</h3>
<p><strong>Size Optimization:</strong></p>
<pre><code class="language-cmake"># Enable size optimizations
set_property(TARGET app PROPERTY COMPILE_OPTIONS -Os)

# Remove unused sections
target_link_options(app PRIVATE -Wl,--gc-sections)

# Strip debug information in release builds
if(NOT CONFIG_DEBUG)
    target_link_options(app PRIVATE -Wl,--strip-debug)
endif()
</code></pre>
<p><strong>Build Time Optimization:</strong></p>
<pre><code class="language-bash"># Use Ninja build system (faster than Make)
west build -b rpi_4b -- -G Ninja

# Parallel compilation
west build -b rpi_4b -- -j8

# Use ccache for faster rebuilds
export USE_CCACHE=1
</code></pre>
<h2 id="device-tree-integration">Device Tree Integration</h2>
<h3 id="device-tree-in-the-build-process">Device Tree in the Build Process</h3>
<p>Device tree describes hardware layout and is compiled during build:</p>
<p><strong>Board Device Tree (boards/raspberrypi/rpi_4b/rpi_4b.dts):</strong></p>
<pre><code class="language-dts">/dts-v1/;

#include &lt;broadcom/bcm2711.dtsi&gt;
#include &lt;zephyr/dt-bindings/gpio/gpio.h&gt;

/ {
    model = &quot;Raspberry Pi 4 Model B&quot;;
    compatible = &quot;raspberrypi,4-model-b&quot;, &quot;brcm,bcm2838&quot;;

    chosen {
        zephyr,console = &amp;uart1;
        zephyr,shell-uart = &amp;uart1;
        zephyr,sram = &amp;sram0;
    };

    leds {
        compatible = &quot;gpio-leds&quot;;
        led_act: led-act {
            gpios = &lt;&amp;gpio1 14 GPIO_ACTIVE_HIGH&gt;; /* GPIO 42 */
            label = &quot;ACT&quot;;
        };
    };
};
</code></pre>
<p><strong>Application Device Tree Overlay (app.overlay):</strong></p>
<pre><code class="language-dts">/ {
    sensors {
        compatible = &quot;sensor-array&quot;;
        temp_sensor: temperature {
            compatible = &quot;bosch,bme280&quot;;
            reg = &lt;0x76&gt;;
            label = &quot;BME280&quot;;
        };
    };
};
</code></pre>
<h3 id="build-system-device-tree-processing">Build System Device Tree Processing</h3>
<ol>
<li><strong>Preprocessing:</strong> Include files and macros are processed</li>
<li><strong>Compilation:</strong> Device tree compiler (dtc) creates binary blob</li>
<li><strong>Generation:</strong> C headers are generated for driver access</li>
<li><strong>Integration:</strong> Device tree data is linked into firmware</li>
</ol>
<hr />
<p>This theory foundation prepares you for hands-on practice in the <a href="../lab/">Lab section</a>, where you'll apply these concepts to build and customize real Zephyr applications.</p>
<p><a href="../lab/">Next: Zephyr Build System Lab</a></p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 21, 2025 09:28:24 UTC">October 21, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.expand", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>